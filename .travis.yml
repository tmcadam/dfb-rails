language: ruby
rvm:
- 2.2.7
addons:
  apt:
    packages:
    - sshpass
install:
- bundle install
script:
- bin/rails test
after_success:
- export SSHPASS=$DEPLOY_PASS
- sshpass -e ssh -o stricthostkeychecking=no ${DEPLOY_USER}@${DEPLOY_HOST} bash "${DEPLOY_HOME}/git_deploy.sh"
  "${DEPLOY_PATH}" ${DEPLOY_REPO} ${DEPLOY_BRANCH}
- sshpass -e ssh -o stricthostkeychecking=no $DEPLOY_USER@$DEPLOY_HOST bash "${DEPLOY_PATH}/deploy.sh"
env:
  global:
  - DEPLOY_BRANCH=origin/master
  - DEPLOY_REPO=tmcadam/dfb-rails
  - secure: aEbH0wQXO1+fzaWKLv9FsHgfhTPv7eOMx5Q2a6TpnUh/SyAf2v8qP0qpkCQ1wXbBDNGCWU/FIo+3nb/2oChGMsvdOpyMDaIxToFNymDiFeBZDhejnZdkCWjaAdoULcjYBti8WxN4GEChzkhRNy/ZbLKEKEsplDou6g1fjU+dF24CQr95xMbGvqM1tAaJ69ycnWBPIbsKYRpYRoYd/1GB1MzUiKQW6uR9/YhXtu6Uj/0A0nuXEp+fVjLO+Zuv/I7gQBgC5V/Hstn0eDAXx8RVp+HNiur+AICeRoZeVUCylolJqoZO2aUJbG1hE00tmSVhoCR0QXkWdvEfewmrvnnQTL0eYeaxnpx7EnOb3nMS5mpzOo5nSOq0SHR/RiBibF+fhFohHg5zXFtBOWsvABSSyIojjCiNf3uD1bFzgzRgsekpIxKli4eZa4/kZOGszSzsaUfuyIpBLSN7g7HFpEOE78/+7NqRKtLYqfc0AFrNOxHie+Q7C7u+pserSu8/Qn3Bn7yO2df3WaCUAxektyeFuTSP1TQiyyszlgLy40nx9WhD79/o6UzQjBHl+GnqccYNm+Z6fiqck9aFsYwufy5zPPSaqgmix51Je2YY6OWjkSod/9Iu2d/m/Xs0kVeLcHxSE9krn8fZVcNCtZaqanvtK4u3XLzN4Do54Q1JUq/3dK4=
  - secure: ODDnrmuP0ugXkPrRkqmBibP9PeMNNfy27i3paPUeZ71mA0VD7fOeIgL+nr5IS8WZzahBlsE6S7e/oN6dqEOWEXZtdo4ZV8+5DYSFbPkbtrlX1lnRa6AFnjpIGxaTiN350wmcbMz+ogeoN9Zm41NXsw6pJEZwk3OMVfv+5dVUXlnjf1mdKzOo6OhmjHYMtZhwoBGn6rQIULRD4WPX4xfWyKwysZsTwDHhnltu7Ub1aWalW1FGxqwXmKlJf0Ijaq4VDy5NKE8oMzFb6+IAW/FSyLjxwkBeSlW2yBmW9MpMK09UccTDJyZrd+cU3pfv0vs0YuON4uCBi1p8TWmWb541bvkafY72zUeMNUrPWtBWkCiDrr6OM0Eh77RNMt9j9GzB/lQS1ASF9gXLxr5LcRfc2umFvSfnrgL6drYQVq0qrZgaWcDhjJeesIUjwtNHH+52dZOBUGbTHSAyFuw3h5AVjTCxHN7x9wX+OkBz50eTIB6Ntp6pIqFKVYOJ/WEBy3mdqrMzeZO/RMntHvbul1gCeSN5c/uTYfmOlDFk5Y/wF9B8598Ni78XSDXxObNvhb1kyP0wp+9O/By2RUvBbK50s5PfcSadTnQ7jKL/30dKapBMbkthdcyK/YnPJi8iJ93Efru42plMzPKf45d5hiI/xeCzyLftW5w/9aqdswCaPlU=
  - secure: qZeugHNcSmPXI6d4F05Z8NITidtT1Lc2XefYyKvFj+3WEJGGUsyZ3xU8xHOLKOKy56baTl58geBRe7x7Jk+wlNz9+RQ4lSX/5ENvWYvoyeGDM+Y4Wq3An6EjKEcIYxEpAQ6Ar1gtgHZBZpPiSgLgmOUwXwm4OQnFZ4zc9BLkRNtZy7rDSb63eoTY2JJ9Rsc4iRUrFBMa0TvM6e2Ko2HGxRkkKA76jGaa2TBbB+a1oXEwve0r0EiXCocCrv2Iq4FfJ7m3k1htPJqkuRi3+lZtW6MbiGIyji+nbJdHepGTN5TZS64P0B7sVAxqPTH23wCLVkgKx11asHGaCc+Yf1L8XTckjFpJSJ3f/yzxft9w7t5ujGAGYTKUE4TVKC/VNTxuI4CjDAe6oG9zuyJ/cY+QbtAnC5uuwO7LWFURMVIicAakQXB4VrKvVFTlMj7goqRoziTCv+NoXuMYqofDZaLXusVEgvTtIik4FTAfisqvUIZ9DrU9a1ciaCCInq0y2RgL8B29HMqPRnnTyd1YxhzC+MZGq46sapr1tAFwVahLnoTDzAdyD1GJH5cUGkEdcB4nqCISZSnhM46itOJp6KmI8+0g2jY1fs5BgMfieAXux8Hb5gr08ll0cDEvI9dITZUg2rCptG/H/5JHdpDYcrACDEK5IbuDyDW2259j4gnu/Dg=
  - secure: DP+w/t+mCdaPmMSq3SdM54aKFR1M30u+lLCTBP8H3FEGE439FhohrnqzGMEVl6PtTsjVdpHnKJc1ZekldcQ4oTbkGeTWjOFFNWA7zXJ4RMI4lWLtip/M7EZ11d1xxWvGMSflHvIld7Mn03I5iMNt1aFPnZhZwYHO2iJS2TI5/1lEQimJgBgi9OQ53Sy666/ocLWkRcjH2kSZcUHhcdeSph5EAwuOreRJ2izN/ayj2F0idhEDMBDIZ7eLSsuF5lP8obF7NnEbV3NAm4jc3MK3DpjLyWrhuwKuWKXgtDZOHLXRhuevc5GQYy7KA9vpQo5f58PYvzphiTFm4vsIIh+5LNUGhQ6KqI2kmu+WbJTCJvRrirkdWfQFT6AjKRjmht4v5HR46mRK2Nm1gMn3JIRjH8TSnl0DmilppUyO9P8PU8JaLAhraiIH5p6c3Jr5EbysK406QO90DdspxPASJkz9de4j4wlcAfA4nxlvUOoM7ppqBtzu8+TUFKDbuuYLXxpVDxKXT2h4oaAxoGYp0lWh/ZpOGLW3tleVRDH9h3C/umOMsGUDhpZjyIcF3Wf+s3GTScSoq6O9bgcFjQRJB+zoPDpsyKqYREacpNkuoEu8diDWexWEf7Fi96xqK6SHIAJ0suqkrQMc3CmJ3u6/0JfALaEh6wAn/iYvedsRO/OQBoY=
  - secure: OADsLRfC+wmJv3COykO2nyTl2WbpGkcgJT/T4FUpkQ/2J1+GUCH0XHALVtXKyqWdfwyk4gOWmUK+lk5LlGPZ29+IoSa98pdWl6+8wf3F/rTdW4UYhjpDnrr3mjRmSpYHTo6K1iqonao4M/+xVwDQR3exu1YmP6Ky55iqleqfo0v+XEyAIHa2osN/dUtDN4Og3LOLfMXOWvV+LcRql9U2tnox0lpyx3KYugxmNuMdbJqf0mpqN8fTwX4egURncSlVQSltqrmwZ8o5whv0K5/Dimc7BJa7T75uGfemh+bZvSTbuR/3Ki+Y5aBnthDbnHSXYan9nC9XoNqqXjRnbkCAUTldOwtyx7tyOoRzdThTlDGmNVnMVYqEL9U8ssm0xMKLFpxY1Wp/KCaEItSIVB+7ijDzzkHpm4sT+Q8dB8OFGqjHoPpLtPLy5v2tLeIVm8895fW5TwJOsNASMvPjJha5mhOf49t/BwRFjG5BuM13IFW+6d9uRFJREEww0xj6goy6g9YWGu2g5tjFteD++L3lHXHpunA1OillWYXYe8aQ81/jUamvS4DDZGhDCENWNj6m5OVdgYFIYPTgiuZK/iMfinD2c/HgzR+oZyXONAFGtqzhNRBC4RWTZm3lb6GXdV6enk8SOVKUXmi6om9xBcfhICymxKE6m1VFwaQAVsa4+Vw=
